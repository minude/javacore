<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java BIO | JAVACORE</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/javacore/favicon.ico">
    <meta name="description" content="Java æ•™ç¨‹">
    <link rel="preload" href="/javacore/assets/css/0.styles.0d8d0e5e.css" as="style"><link rel="preload" href="/javacore/assets/js/app.6b9bd1ac.js" as="script"><link rel="preload" href="/javacore/assets/js/4.5b70554b.js" as="script"><link rel="preload" href="/javacore/assets/js/49.6933cdf6.js" as="script"><link rel="preload" href="/javacore/assets/js/5.97e60065.js" as="script"><link rel="prefetch" href="/javacore/assets/js/10.7c8236ba.js"><link rel="prefetch" href="/javacore/assets/js/11.f7e043aa.js"><link rel="prefetch" href="/javacore/assets/js/12.b95c774a.js"><link rel="prefetch" href="/javacore/assets/js/13.33335c3c.js"><link rel="prefetch" href="/javacore/assets/js/14.40b2a3d8.js"><link rel="prefetch" href="/javacore/assets/js/15.531535d9.js"><link rel="prefetch" href="/javacore/assets/js/16.aae180ed.js"><link rel="prefetch" href="/javacore/assets/js/17.97241acb.js"><link rel="prefetch" href="/javacore/assets/js/18.718393e5.js"><link rel="prefetch" href="/javacore/assets/js/19.cdfcd8da.js"><link rel="prefetch" href="/javacore/assets/js/20.cda946e4.js"><link rel="prefetch" href="/javacore/assets/js/21.a034e65f.js"><link rel="prefetch" href="/javacore/assets/js/22.900e3b22.js"><link rel="prefetch" href="/javacore/assets/js/23.ec421905.js"><link rel="prefetch" href="/javacore/assets/js/24.3c52f020.js"><link rel="prefetch" href="/javacore/assets/js/25.590d7934.js"><link rel="prefetch" href="/javacore/assets/js/26.8267af8d.js"><link rel="prefetch" href="/javacore/assets/js/27.fb90134e.js"><link rel="prefetch" href="/javacore/assets/js/28.e2685323.js"><link rel="prefetch" href="/javacore/assets/js/29.eb3a852c.js"><link rel="prefetch" href="/javacore/assets/js/30.b7bf8986.js"><link rel="prefetch" href="/javacore/assets/js/31.fe1064d0.js"><link rel="prefetch" href="/javacore/assets/js/32.e4584de4.js"><link rel="prefetch" href="/javacore/assets/js/33.5d62b936.js"><link rel="prefetch" href="/javacore/assets/js/34.dd390437.js"><link rel="prefetch" href="/javacore/assets/js/35.9ab96381.js"><link rel="prefetch" href="/javacore/assets/js/36.27b07dc5.js"><link rel="prefetch" href="/javacore/assets/js/37.48ff8ff4.js"><link rel="prefetch" href="/javacore/assets/js/38.b7365474.js"><link rel="prefetch" href="/javacore/assets/js/39.5712c004.js"><link rel="prefetch" href="/javacore/assets/js/40.ac101680.js"><link rel="prefetch" href="/javacore/assets/js/41.843ebd86.js"><link rel="prefetch" href="/javacore/assets/js/42.ae780a92.js"><link rel="prefetch" href="/javacore/assets/js/43.a686109f.js"><link rel="prefetch" href="/javacore/assets/js/44.08c41c1d.js"><link rel="prefetch" href="/javacore/assets/js/45.7c0c9e5c.js"><link rel="prefetch" href="/javacore/assets/js/46.0c1309e8.js"><link rel="prefetch" href="/javacore/assets/js/47.b2c70776.js"><link rel="prefetch" href="/javacore/assets/js/48.5c8e4aa4.js"><link rel="prefetch" href="/javacore/assets/js/50.a218cbc7.js"><link rel="prefetch" href="/javacore/assets/js/51.d8615659.js"><link rel="prefetch" href="/javacore/assets/js/52.44e9c32c.js"><link rel="prefetch" href="/javacore/assets/js/53.d0c73e04.js"><link rel="prefetch" href="/javacore/assets/js/54.fb6ffc36.js"><link rel="prefetch" href="/javacore/assets/js/55.b60c63ac.js"><link rel="prefetch" href="/javacore/assets/js/56.0d89944f.js"><link rel="prefetch" href="/javacore/assets/js/57.bb4d41c4.js"><link rel="prefetch" href="/javacore/assets/js/58.77dd3b13.js"><link rel="prefetch" href="/javacore/assets/js/59.8ed7b8a2.js"><link rel="prefetch" href="/javacore/assets/js/6.98d5ec97.js"><link rel="prefetch" href="/javacore/assets/js/60.5f85043a.js"><link rel="prefetch" href="/javacore/assets/js/61.667afabd.js"><link rel="prefetch" href="/javacore/assets/js/62.f0934c92.js"><link rel="prefetch" href="/javacore/assets/js/63.65a40ee5.js"><link rel="prefetch" href="/javacore/assets/js/64.9b172a72.js"><link rel="prefetch" href="/javacore/assets/js/65.d0172c36.js"><link rel="prefetch" href="/javacore/assets/js/7.ac8df731.js"><link rel="prefetch" href="/javacore/assets/js/8.27ed12a9.js"><link rel="prefetch" href="/javacore/assets/js/9.0dd858f2.js"><link rel="prefetch" href="/javacore/assets/js/vendors~flowchart.8982e116.js"><link rel="prefetch" href="/javacore/assets/js/vendors~notification.f509967c.js">
    <link rel="stylesheet" href="/javacore/assets/css/0.styles.0d8d0e5e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/javacore/" class="home-link router-link-active"><img src="images/dunwu-logo-100.png" alt="JAVACORE" class="logo"> <span class="site-name can-hide">JAVACORE</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/javacore/basics/" class="nav-link">
  åŸºç¡€
</a></div><div class="nav-item"><a href="/javacore/advanced/" class="nav-link">
  é«˜çº§
</a></div><div class="nav-item"><a href="/javacore/container/" class="nav-link">
  å®¹å™¨
</a></div><div class="nav-item"><a href="/javacore/io/" class="nav-link router-link-active">
  IO
</a></div><div class="nav-item"><a href="/javacore/concurrent/" class="nav-link">
  å¹¶å‘
</a></div><div class="nav-item"><a href="/javacore/jvm/" class="nav-link">
  JVM
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">âœ¨ Javaç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaTech æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-boot-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ¯ åšå®¢
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/javacore" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/javacore/basics/" class="nav-link">
  åŸºç¡€
</a></div><div class="nav-item"><a href="/javacore/advanced/" class="nav-link">
  é«˜çº§
</a></div><div class="nav-item"><a href="/javacore/container/" class="nav-link">
  å®¹å™¨
</a></div><div class="nav-item"><a href="/javacore/io/" class="nav-link router-link-active">
  IO
</a></div><div class="nav-item"><a href="/javacore/concurrent/" class="nav-link">
  å¹¶å‘
</a></div><div class="nav-item"><a href="/javacore/jvm/" class="nav-link">
  JVM
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">âœ¨ Javaç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaTech æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-boot-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ¯ åšå®¢
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/javacore" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java BIO</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javacore/io/java-bio.html#ä¸€ã€ç®€ä»‹" class="sidebar-link">ä¸€ã€ç®€ä»‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javacore/io/java-bio.html#åŸºæœ¬æ¦‚å¿µ" class="sidebar-link">åŸºæœ¬æ¦‚å¿µ</a></li><li class="sidebar-sub-header"><a href="/javacore/io/java-bio.html#bio" class="sidebar-link">BIO</a></li><li class="sidebar-sub-header"><a href="/javacore/io/java-bio.html#nio" class="sidebar-link">NIO</a></li><li class="sidebar-sub-header"><a href="/javacore/io/java-bio.html#aio" class="sidebar-link">AIO</a></li></ul></li><li><a href="/javacore/io/java-bio.html#äºŒã€io-æµ" class="sidebar-link">äºŒã€IO æµ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javacore/io/java-bio.html#å­—èŠ‚æµ" class="sidebar-link">å­—èŠ‚æµ</a></li><li class="sidebar-sub-header"><a href="/javacore/io/java-bio.html#å­—ç¬¦æµ" class="sidebar-link">å­—ç¬¦æµ</a></li><li class="sidebar-sub-header"><a href="/javacore/io/java-bio.html#å­—èŠ‚æµ-vs-å­—ç¬¦æµ" class="sidebar-link">å­—èŠ‚æµ vs. å­—ç¬¦æµ</a></li></ul></li><li><a href="/javacore/io/java-bio.html#ä¸‰ã€ä¼ ç»Ÿ-bio" class="sidebar-link">ä¸‰ã€ä¼ ç»Ÿ BIO</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/javacore/io/java-bio.html#å››ã€ä¼ªå¼‚æ­¥-bio" class="sidebar-link">å››ã€ä¼ªå¼‚æ­¥ BIO</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/javacore/io/java-bio.html#å‚è€ƒèµ„æ–™" class="sidebar-link">å‚è€ƒèµ„æ–™</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="java-bio"><a href="#java-bio" class="header-anchor">#</a> Java BIO</h1> <blockquote><p><strong>ğŸ“¦ æœ¬æ–‡ä»¥åŠç¤ºä¾‹æºç å·²å½’æ¡£åœ¨ <a href="https://github.com/dunwu/javacore/" target="_blank" rel="noopener noreferrer">javacore<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <p><em><strong>å…³é”®è¯ï¼š<code>InputStream</code>ã€<code>OutputStream</code>ã€<code>Reader</code>ã€<code>Writer</code></strong></em></p></blockquote> <ul><li><a href="#%E4%B8%80%E7%AE%80%E4%BB%8B">ä¸€ã€ç®€ä»‹</a> <ul><li><a href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">åŸºæœ¬æ¦‚å¿µ</a></li> <li><a href="#bio">BIO</a></li> <li><a href="#nio">NIO</a></li> <li><a href="#aio">AIO</a></li></ul></li> <li><a href="#%E4%BA%8Cio-%E6%B5%81">äºŒã€IO æµ</a> <ul><li><a href="#%E5%AD%97%E8%8A%82%E6%B5%81">å­—èŠ‚æµ</a></li> <li><a href="#%E5%AD%97%E7%AC%A6%E6%B5%81">å­—ç¬¦æµ</a></li> <li><a href="#%E5%AD%97%E8%8A%82%E6%B5%81-vs-%E5%AD%97%E7%AC%A6%E6%B5%81">å­—èŠ‚æµ vs. å­—ç¬¦æµ</a></li></ul></li> <li><a href="#%E4%B8%89%E4%BC%A0%E7%BB%9F-bio">ä¸‰ã€ä¼ ç»Ÿ BIO</a></li> <li><a href="#%E5%9B%9B%E4%BC%AA%E5%BC%82%E6%AD%A5-bio">å››ã€ä¼ªå¼‚æ­¥ BIO</a></li> <li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">å‚è€ƒèµ„æ–™</a></li></ul> <h2 id="ä¸€ã€ç®€ä»‹"><a href="#ä¸€ã€ç®€ä»‹" class="header-anchor">#</a> ä¸€ã€ç®€ä»‹</h2> <p>Java IO æ–¹å¼æœ‰å¾ˆå¤šç§ï¼ŒåŸºäºä¸åŒçš„ IO æŠ½è±¡æ¨¡å‹å’Œäº¤äº’æ–¹å¼ï¼Œå¯ä»¥è¿›è¡Œç®€å•åŒºåˆ†ã€‚</p> <h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="header-anchor">#</a> åŸºæœ¬æ¦‚å¿µ</h3> <ul><li>åŒºåˆ†åŒæ­¥æˆ–å¼‚æ­¥ï¼ˆsynchronous/asynchronousï¼‰ã€‚ç®€å•æ¥è¯´ï¼ŒåŒæ­¥æ˜¯ä¸€ç§å¯é çš„æœ‰åºè¿è¡Œæœºåˆ¶ï¼Œå½“æˆ‘ä»¬è¿›è¡ŒåŒæ­¥æ“ä½œæ—¶ï¼Œåç»­çš„ä»»åŠ¡æ˜¯ç­‰å¾…å½“å‰è°ƒç”¨è¿”å›ï¼Œæ‰ä¼šè¿›è¡Œä¸‹ä¸€æ­¥ï¼›è€Œå¼‚æ­¥åˆ™ç›¸åï¼Œå…¶ä»–ä»»åŠ¡ä¸éœ€è¦ç­‰å¾…å½“å‰è°ƒç”¨è¿”å›ï¼Œé€šå¸¸ä¾é äº‹ä»¶ã€å›è°ƒç­‰æœºåˆ¶æ¥å®ç°ä»»åŠ¡é—´æ¬¡åºå…³ç³»ã€‚</li> <li>åŒºåˆ†é˜»å¡ä¸éé˜»å¡ï¼ˆblocking/non-blockingï¼‰ã€‚åœ¨è¿›è¡Œé˜»å¡æ“ä½œæ—¶ï¼Œå½“å‰çº¿ç¨‹ä¼šå¤„äºé˜»å¡çŠ¶æ€ï¼Œæ— æ³•ä»äº‹å…¶ä»–ä»»åŠ¡ï¼Œåªæœ‰å½“æ¡ä»¶å°±ç»ªæ‰èƒ½ç»§ç»­ï¼Œæ¯”å¦‚ ServerSocket æ–°è¿æ¥å»ºç«‹å®Œæ¯•ï¼Œæˆ–æ•°æ®è¯»å–ã€å†™å…¥æ“ä½œå®Œæˆï¼›è€Œéé˜»å¡åˆ™æ˜¯ä¸ç®¡ IO æ“ä½œæ˜¯å¦ç»“æŸï¼Œç›´æ¥è¿”å›ï¼Œç›¸åº”æ“ä½œåœ¨åå°ç»§ç»­å¤„ç†ã€‚</li></ul> <p>ä¸èƒ½ä¸€æ¦‚è€Œè®ºè®¤ä¸ºåŒæ­¥æˆ–é˜»å¡å°±æ˜¯ä½æ•ˆï¼Œå…·ä½“è¿˜è¦çœ‹åº”ç”¨å’Œç³»ç»Ÿç‰¹å¾ã€‚</p> <h3 id="bio"><a href="#bio" class="header-anchor">#</a> BIO</h3> <blockquote><p>BIOï¼ˆblocking IOï¼‰ å³é˜»å¡ IOã€‚æŒ‡çš„ä¸»è¦æ˜¯ä¼ ç»Ÿçš„ <code>java.io</code> åŒ…ï¼Œå®ƒåŸºäºæµæ¨¡å‹å®ç°ã€‚</p></blockquote> <p><code>java.io</code> åŒ…æä¾›äº†æˆ‘ä»¬æœ€ç†ŸçŸ¥çš„ä¸€äº› IO åŠŸèƒ½ï¼Œæ¯”å¦‚ File æŠ½è±¡ã€è¾“å…¥è¾“å‡ºæµç­‰ã€‚äº¤äº’æ–¹å¼æ˜¯åŒæ­¥ã€é˜»å¡çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è¯»å–è¾“å…¥æµæˆ–è€…å†™å…¥è¾“å‡ºæµæ—¶ï¼Œåœ¨è¯»ã€å†™åŠ¨ä½œå®Œæˆä¹‹å‰ï¼Œçº¿ç¨‹ä¼šä¸€ç›´é˜»å¡åœ¨é‚£é‡Œï¼Œå®ƒä»¬ä¹‹é—´çš„è°ƒç”¨æ˜¯å¯é çš„çº¿æ€§é¡ºåºã€‚</p> <p><code>java.io</code> åŒ…çš„å¥½å¤„æ˜¯ä»£ç æ¯”è¾ƒç®€å•ã€ç›´è§‚ï¼›ç¼ºç‚¹åˆ™æ˜¯ IO æ•ˆç‡å’Œæ‰©å±•æ€§å­˜åœ¨å±€é™æ€§ï¼Œå®¹æ˜“æˆä¸ºåº”ç”¨æ€§èƒ½çš„ç“¶é¢ˆã€‚</p> <p>å¾ˆå¤šæ—¶å€™ï¼Œäººä»¬ä¹ŸæŠŠ java.net ä¸‹é¢æä¾›çš„éƒ¨åˆ†ç½‘ç»œ APIï¼Œæ¯”å¦‚ <code>Socket</code>ã€<code>ServerSocket</code>ã€<code>HttpURLConnection</code> ä¹Ÿå½’ç±»åˆ°åŒæ­¥é˜»å¡ IO ç±»åº“ï¼Œå› ä¸ºç½‘ç»œé€šä¿¡åŒæ ·æ˜¯ IO è¡Œä¸ºã€‚</p> <h3 id="nio"><a href="#nio" class="header-anchor">#</a> NIO</h3> <blockquote><p>NIOï¼ˆnon-blocking IOï¼‰ å³éé˜»å¡ IOã€‚æŒ‡çš„æ˜¯ Java 1.4 ä¸­å¼•å…¥çš„ <code>java.nio</code> åŒ…ã€‚</p></blockquote> <p><code>java.nio</code> åŒ…æä¾›äº† <code>Channel</code>ã€<code>Selector</code>ã€<code>Buffer</code> ç­‰æ–°çš„æŠ½è±¡ï¼Œå¯ä»¥æ„å»ºå¤šè·¯å¤ç”¨çš„ã€åŒæ­¥éé˜»å¡ IO ç¨‹åºï¼ŒåŒæ—¶æä¾›äº†æ›´æ¥è¿‘æ“ä½œç³»ç»Ÿåº•å±‚çš„é«˜æ€§èƒ½æ•°æ®æ“ä½œæ–¹å¼ã€‚</p> <h3 id="aio"><a href="#aio" class="header-anchor">#</a> AIO</h3> <blockquote><p>AIOï¼ˆAsynchronous IOï¼‰ å³å¼‚æ­¥éé˜»å¡ IOï¼ŒæŒ‡çš„æ˜¯ Java 7 ä¸­ï¼Œå¯¹ NIO æœ‰äº†è¿›ä¸€æ­¥çš„æ”¹è¿›ï¼Œä¹Ÿç§°ä¸º NIO2ï¼Œå¼•å…¥äº†å¼‚æ­¥éé˜»å¡ IO æ–¹å¼ã€‚</p></blockquote> <p>åœ¨ Java 7 ä¸­ï¼ŒNIO æœ‰äº†è¿›ä¸€æ­¥çš„æ”¹è¿›ï¼Œä¹Ÿå°±æ˜¯ NIO 2ï¼Œå¼•å…¥äº†å¼‚æ­¥éé˜»å¡ IO æ–¹å¼ï¼Œä¹Ÿæœ‰å¾ˆå¤šäººå«å®ƒ AIOï¼ˆAsynchronous IOï¼‰ã€‚å¼‚æ­¥ IO æ“ä½œåŸºäºäº‹ä»¶å’Œå›è°ƒæœºåˆ¶ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œåº”ç”¨æ“ä½œç›´æ¥è¿”å›ï¼Œè€Œä¸ä¼šé˜»å¡åœ¨é‚£é‡Œï¼Œå½“åå°å¤„ç†å®Œæˆï¼Œæ“ä½œç³»ç»Ÿä¼šé€šçŸ¥ç›¸åº”çº¿ç¨‹è¿›è¡Œåç»­å·¥ä½œã€‚</p> <h2 id="äºŒã€io-æµ"><a href="#äºŒã€io-æµ" class="header-anchor">#</a> äºŒã€IO æµ</h2> <p>æµä»æ¦‚å¿µä¸Šæ¥è¯´æ˜¯ä¸€ä¸ªè¿ç»­çš„æ•°æ®æµã€‚å½“ç¨‹åºéœ€è¦è¯»æ•°æ®çš„æ—¶å€™å°±éœ€è¦ä½¿ç”¨è¾“å…¥æµè¯»å–æ•°æ®ï¼Œå½“éœ€è¦å¾€å¤–å†™æ•°æ®çš„æ—¶å€™å°±éœ€è¦è¾“å‡ºæµã€‚</p> <p>BIO ä¸­æ“ä½œçš„æµä¸»è¦æœ‰ä¸¤å¤§ç±»ï¼Œå­—èŠ‚æµå’Œå­—ç¬¦æµï¼Œä¸¤ç±»æ ¹æ®æµçš„æ–¹å‘éƒ½å¯ä»¥åˆ†ä¸ºè¾“å…¥æµå’Œè¾“å‡ºæµã€‚</p> <ul><li><strong>å­—èŠ‚æµ</strong> <ul><li>è¾“å…¥å­—èŠ‚æµï¼š<code>InputStream</code></li> <li>è¾“å‡ºå­—èŠ‚æµï¼š<code>OutputStream</code></li></ul></li> <li><strong>å­—ç¬¦æµ</strong> <ul><li>è¾“å…¥å­—ç¬¦æµï¼š<code>Reader</code></li> <li>è¾“å‡ºå­—ç¬¦æµï¼š<code>Writer</code></li></ul></li></ul> <p><img src="http://dunwu.test.upcdn.net/snap/20200219130627.png" alt="img"></p> <h3 id="å­—èŠ‚æµ"><a href="#å­—èŠ‚æµ" class="header-anchor">#</a> å­—èŠ‚æµ</h3> <p>å­—èŠ‚æµä¸»è¦æ“ä½œå­—èŠ‚æ•°æ®æˆ–äºŒè¿›åˆ¶å¯¹è±¡ã€‚</p> <p>å­—èŠ‚æµæœ‰ä¸¤ä¸ªæ ¸å¿ƒæŠ½è±¡ç±»ï¼š<code>InputStream</code> å’Œ <code>OutputStream</code>ã€‚æ‰€æœ‰çš„å­—èŠ‚æµç±»éƒ½ç»§æ‰¿è‡ªè¿™ä¸¤ä¸ªæŠ½è±¡ç±»ã€‚</p> <p><img src="http://dunwu.test.upcdn.net/snap/20200219133627.png" alt="img"></p> <h4 id="æ–‡ä»¶å­—èŠ‚æµ"><a href="#æ–‡ä»¶å­—èŠ‚æµ" class="header-anchor">#</a> æ–‡ä»¶å­—èŠ‚æµ</h4> <p><code>FileOutputStream</code> å’Œ <code>FileInputStream</code> æä¾›äº†è¯»å†™å­—èŠ‚åˆ°æ–‡ä»¶çš„èƒ½åŠ›ã€‚</p> <p>æ–‡ä»¶æµæ“ä½œä¸€èˆ¬æ­¥éª¤ï¼š</p> <ol><li>ä½¿ç”¨ <code>File</code> ç±»ç»‘å®šä¸€ä¸ªæ–‡ä»¶ã€‚</li> <li>æŠŠ <code>File</code> å¯¹è±¡ç»‘å®šåˆ°æµå¯¹è±¡ä¸Šã€‚</li> <li>è¿›è¡Œè¯»æˆ–å†™æ“ä½œã€‚</li> <li>å…³é—­æµ</li></ol> <p><code>FileOutputStream</code> å’Œ <code>FileInputStream</code> ç¤ºä¾‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileStreamDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> FILEPATH <span class="token operator">=</span> <span class="token string">&quot;temp.log&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token function">write</span><span class="token punctuation">(</span>FILEPATH<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">read</span><span class="token punctuation">(</span>FILEPATH<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">write</span><span class="token punctuation">(</span><span class="token class-name">String</span> filepath<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// ç¬¬1æ­¥ã€ä½¿ç”¨Fileç±»æ‰¾åˆ°ä¸€ä¸ªæ–‡ä»¶</span>
        <span class="token class-name">File</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ç¬¬2æ­¥ã€é€šè¿‡å­ç±»å®ä¾‹åŒ–çˆ¶ç±»å¯¹è±¡</span>
        <span class="token class-name">OutputStream</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å®ä¾‹åŒ–æ—¶ï¼Œé»˜è®¤ä¸ºè¦†ç›–åŸæ–‡ä»¶å†…å®¹æ–¹å¼ï¼›å¦‚æœæ·»åŠ trueå‚æ•°ï¼Œåˆ™å˜ä¸ºå¯¹åŸæ–‡ä»¶è¿½åŠ å†…å®¹çš„æ–¹å¼ã€‚</span>
        <span class="token comment">// OutputStream out = new FileOutputStream(f, true);</span>

        <span class="token comment">// ç¬¬3æ­¥ã€è¿›è¡Œå†™æ“ä½œ</span>
        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;Hello World\n&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ç¬¬4æ­¥ã€å…³é—­è¾“å‡ºæµ</span>
        out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token class-name">String</span> filepath<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// ç¬¬1æ­¥ã€ä½¿ç”¨Fileç±»æ‰¾åˆ°ä¸€ä¸ªæ–‡ä»¶</span>
        <span class="token class-name">File</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ç¬¬2æ­¥ã€é€šè¿‡å­ç±»å®ä¾‹åŒ–çˆ¶ç±»å¯¹è±¡</span>
        <span class="token class-name">InputStream</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ç¬¬3æ­¥ã€è¿›è¡Œè¯»æ“ä½œ</span>
        <span class="token comment">// æœ‰ä¸‰ç§è¯»å–æ–¹å¼ï¼Œä½“ä¼šå…¶å·®å¼‚</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> f<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¯»å–å†…å®¹</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å…¥æ•°æ®çš„é•¿åº¦ï¼š&quot;</span> <span class="token operator">+</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ç¬¬4æ­¥ã€å…³é—­è¾“å…¥æµ</span>
        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å†…å®¹ä¸ºï¼š\n&quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h4 id="å†…å­˜å­—èŠ‚æµ"><a href="#å†…å­˜å­—èŠ‚æµ" class="header-anchor">#</a> å†…å­˜å­—èŠ‚æµ</h4> <p><code>ByteArrayInputStream</code> å’Œ <code>ByteArrayOutputStream</code> æ˜¯ç”¨æ¥å®Œæˆå†…å­˜çš„è¾“å…¥å’Œè¾“å‡ºåŠŸèƒ½ã€‚</p> <p>å†…å­˜æ“ä½œæµä¸€èˆ¬åœ¨ç”Ÿæˆä¸€äº›ä¸´æ—¶ä¿¡æ¯æ—¶æ‰ä½¿ç”¨ã€‚ å¦‚æœä¸´æ—¶ä¿¡æ¯ä¿å­˜åœ¨æ–‡ä»¶ä¸­ï¼Œè¿˜éœ€è¦åœ¨æœ‰æ•ˆæœŸè¿‡ååˆ é™¤æ–‡ä»¶ï¼Œè¿™æ ·æ¯”è¾ƒéº»çƒ¦ã€‚</p> <p><code>ByteArrayInputStream</code> å’Œ <code>ByteArrayOutputStream</code> ç¤ºä¾‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ByteArrayStreamDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;HELLOWORLD&quot;</span><span class="token punctuation">;</span> <span class="token comment">// å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…¨éƒ¨ç”±å¤§å†™å­—æ¯ç»„æˆ</span>
        <span class="token class-name">ByteArrayInputStream</span> bis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ByteArrayOutputStream</span> bos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å‡†å¤‡ä»å†…å­˜ByteArrayInputStreamä¸­è¯»å–å†…å®¹</span>
        <span class="token keyword">int</span> temp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>temp <span class="token operator">=</span> bis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">char</span> c <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> temp<span class="token punctuation">;</span> <span class="token comment">// è¯»å–çš„æ•°å­—å˜ä¸ºå­—ç¬¦</span>
            bos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†å­—ç¬¦å˜ä¸ºå°å†™</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// æ‰€æœ‰çš„æ•°æ®å°±å…¨éƒ¨éƒ½åœ¨ByteArrayOutputStreamä¸­</span>
        <span class="token class-name">String</span> newStr <span class="token operator">=</span> bos<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å–å‡ºå†…å®¹</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            bis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            bos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>newStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h4 id="ç®¡é“æµ"><a href="#ç®¡é“æµ" class="header-anchor">#</a> ç®¡é“æµ</h4> <p>ç®¡é“æµçš„ä¸»è¦ä½œç”¨æ˜¯å¯ä»¥è¿›è¡Œä¸¤ä¸ªçº¿ç¨‹é—´çš„é€šä¿¡ã€‚</p> <p>å¦‚æœè¦è¿›è¡Œç®¡é“é€šä¿¡ï¼Œåˆ™å¿…é¡»æŠŠ <code>PipedOutputStream</code> è¿æ¥åœ¨ <code>PipedInputStream</code> ä¸Šã€‚ä¸ºæ­¤ï¼Œ<code>PipedOutputStream</code> ä¸­æä¾›äº† <code>connect()</code> æ–¹æ³•ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PipedStreamDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Send</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Receive</span> r <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Receive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            s<span class="token punctuation">.</span><span class="token function">getPos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">getPis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿æ¥ç®¡é“</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¯åŠ¨çº¿ç¨‹</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¯åŠ¨çº¿ç¨‹</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Send</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token class-name">PipedOutputStream</span> pos <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token class-name">Send</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            pos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PipedOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å®ä¾‹åŒ–è¾“å‡ºæµ</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;Hello World!!!&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                pos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                pos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">/**
         * å¾—åˆ°æ­¤çº¿ç¨‹çš„ç®¡é“è¾“å‡ºæµ
         */</span>
        <span class="token class-name">PipedOutputStream</span> <span class="token function">getPos</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> pos<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Receive</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token class-name">PipedInputStream</span> pis <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token class-name">Receive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            pis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PipedInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                len <span class="token operator">=</span> pis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                pis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ¥æ”¶çš„å†…å®¹ä¸ºï¼š&quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">/**
         * å¾—åˆ°æ­¤çº¿ç¨‹çš„ç®¡é“è¾“å…¥æµ
         */</span>
        <span class="token class-name">PipedInputStream</span> <span class="token function">getPis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> pis<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h4 id="å¯¹è±¡å­—èŠ‚æµ"><a href="#å¯¹è±¡å­—èŠ‚æµ" class="header-anchor">#</a> å¯¹è±¡å­—èŠ‚æµ</h4> <p><strong>ObjectInputStream å’Œ ObjectOutputStream æ˜¯å¯¹è±¡è¾“å…¥è¾“å‡ºæµï¼Œä¸€èˆ¬ç”¨äºå¯¹è±¡åºåˆ—åŒ–ã€‚</strong></p> <p>è¿™é‡Œä¸å±•å¼€å™è¿°ï¼Œæƒ³äº†è§£è¯¦ç»†å†…å®¹å’Œç¤ºä¾‹å¯ä»¥å‚è€ƒï¼š<a href="/javacore/io/java-serialization.html">Java åºåˆ—åŒ–</a></p> <h4 id="æ•°æ®æ“ä½œæµ"><a href="#æ•°æ®æ“ä½œæµ" class="header-anchor">#</a> æ•°æ®æ“ä½œæµ</h4> <p>æ•°æ®æ“ä½œæµæä¾›äº†æ ¼å¼åŒ–è¯»å…¥å’Œè¾“å‡ºæ•°æ®çš„æ–¹æ³•ï¼Œåˆ†åˆ«ä¸º <code>DataInputStream</code> å’Œ <code>DataOutputStream</code>ã€‚</p> <p><code>DataInputStream</code> å’Œ <code>DataOutputStream</code> æ ¼å¼åŒ–è¯»å†™æ•°æ®ç¤ºä¾‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataStreamDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> FILEPATH <span class="token operator">=</span> <span class="token string">&quot;temp.log&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">write</span><span class="token punctuation">(</span>FILEPATH<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">read</span><span class="token punctuation">(</span>FILEPATH<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">write</span><span class="token punctuation">(</span><span class="token class-name">String</span> filepath<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1.ä½¿ç”¨ File ç±»ç»‘å®šä¸€ä¸ªæ–‡ä»¶</span>
        <span class="token class-name">File</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.æŠŠ File å¯¹è±¡ç»‘å®šåˆ°æµå¯¹è±¡ä¸Š</span>
        <span class="token class-name">DataOutputStream</span> dos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 3.è¿›è¡Œè¯»æˆ–å†™æ“ä½œ</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> names <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;è¡¬è¡£&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;æ‰‹å¥—&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;å›´å·¾&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">float</span><span class="token punctuation">[</span><span class="token punctuation">]</span> prices <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">98.3f</span><span class="token punctuation">,</span> <span class="token number">30.3f</span><span class="token punctuation">,</span> <span class="token number">50.5f</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> names<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dos<span class="token punctuation">.</span><span class="token function">writeChars</span><span class="token punctuation">(</span>names<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dos<span class="token punctuation">.</span><span class="token function">writeChar</span><span class="token punctuation">(</span><span class="token string">'\t'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dos<span class="token punctuation">.</span><span class="token function">writeFloat</span><span class="token punctuation">(</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dos<span class="token punctuation">.</span><span class="token function">writeChar</span><span class="token punctuation">(</span><span class="token string">'\t'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dos<span class="token punctuation">.</span><span class="token function">writeInt</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dos<span class="token punctuation">.</span><span class="token function">writeChar</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 4.å…³é—­æµ</span>
        dos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token class-name">String</span> filepath<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1.ä½¿ç”¨ File ç±»ç»‘å®šä¸€ä¸ªæ–‡ä»¶</span>
        <span class="token class-name">File</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.æŠŠ File å¯¹è±¡ç»‘å®šåˆ°æµå¯¹è±¡ä¸Š</span>
        <span class="token class-name">DataInputStream</span> dis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 3.è¿›è¡Œè¯»æˆ–å†™æ“ä½œ</span>
        <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// æ¥æ”¶åç§°</span>
        <span class="token keyword">float</span> price <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span> <span class="token comment">// æ¥æ”¶ä»·æ ¼</span>
        <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// æ¥æ”¶æ•°é‡</span>
        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> temp <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// æ¥æ”¶å•†å“åç§°</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// ä¿å­˜è¯»å–æ•°æ®çš„ä¸ªæ•°</span>
        <span class="token keyword">char</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// '\u0000'</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                temp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// å¼€è¾Ÿç©ºé—´</span>
                len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>c <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">readChar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">'\t'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æ¥æ”¶å†…å®¹</span>
                    temp<span class="token punctuation">[</span>len<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>
                    len<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// è¯»å–é•¿åº¦åŠ 1</span>
                <span class="token punctuation">}</span>
                name <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>temp<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†å­—ç¬¦æ•°ç»„å˜ä¸ºString</span>
                price <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">readFloat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¯»å–ä»·æ ¼</span>
                dis<span class="token punctuation">.</span><span class="token function">readChar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¯»å–\t</span>
                num <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">readInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¯»å–int</span>
                dis<span class="token punctuation">.</span><span class="token function">readChar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¯»å–\n</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;åç§°ï¼š%sï¼›ä»·æ ¼ï¼š%5.2fï¼›æ•°é‡ï¼š%d\n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> price<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">EOFException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç»“æŸ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 4.å…³é—­æµ</span>
        dis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h4 id="åˆå¹¶æµ"><a href="#åˆå¹¶æµ" class="header-anchor">#</a> åˆå¹¶æµ</h4> <p>åˆå¹¶æµçš„ä¸»è¦åŠŸèƒ½æ˜¯å°†å¤šä¸ª <code>InputStream</code> åˆå¹¶ä¸ºä¸€ä¸ª <code>InputStream</code> æµã€‚åˆå¹¶æµçš„åŠŸèƒ½ç”± <code>SequenceInputStream</code> å®Œæˆã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SequenceInputStreamDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token class-name">InputStream</span> is1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;temp1.log&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> is2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;temp2.log&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SequenceInputStream</span> sis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SequenceInputStream</span><span class="token punctuation">(</span>is1<span class="token punctuation">,</span> is2<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> temp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// æ¥æ”¶å†…å®¹</span>
        <span class="token class-name">OutputStream</span> os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;temp3.logt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>temp <span class="token operator">=</span> sis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// å¾ªç¯è¾“å‡º</span>
            os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¿å­˜å†…å®¹</span>
        <span class="token punctuation">}</span>

        sis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å…³é—­åˆå¹¶æµ</span>
        is1<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å…³é—­è¾“å…¥æµ1</span>
        is2<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å…³é—­è¾“å…¥æµ2</span>
        os<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å…³é—­è¾“å‡ºæµ</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="å­—ç¬¦æµ"><a href="#å­—ç¬¦æµ" class="header-anchor">#</a> å­—ç¬¦æµ</h3> <p>å­—ç¬¦æµä¸»è¦æ“ä½œå­—ç¬¦ï¼Œä¸€ä¸ªå­—ç¬¦ç­‰äºä¸¤ä¸ªå­—èŠ‚ã€‚</p> <p>å­—ç¬¦æµæœ‰ä¸¤ä¸ªæ ¸å¿ƒç±»ï¼š<code>Reader</code> ç±»å’Œ <code>Writer</code> ã€‚æ‰€æœ‰çš„å­—ç¬¦æµç±»éƒ½ç»§æ‰¿è‡ªè¿™ä¸¤ä¸ªæŠ½è±¡ç±»ã€‚</p> <p><img src="http://dunwu.test.upcdn.net/snap/20200219133648.png" alt="img"></p> <h4 id="æ–‡ä»¶å­—ç¬¦æµ"><a href="#æ–‡ä»¶å­—ç¬¦æµ" class="header-anchor">#</a> æ–‡ä»¶å­—ç¬¦æµ</h4> <p>æ–‡ä»¶å­—ç¬¦æµ <code>FileReader</code> å’Œ <code>FileWriter</code> å¯ä»¥å‘æ–‡ä»¶è¯»å†™æ–‡æœ¬æ•°æ®ã€‚</p> <p><code>FileReader</code> å’Œ <code>FileWriter</code> è¯»å†™æ–‡ä»¶ç¤ºä¾‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileReadWriteDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> FILEPATH <span class="token operator">=</span> <span class="token string">&quot;temp.log&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">write</span><span class="token punctuation">(</span>FILEPATH<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å†…å®¹ä¸ºï¼š&quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token function">read</span><span class="token punctuation">(</span>FILEPATH<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">write</span><span class="token punctuation">(</span><span class="token class-name">String</span> filepath<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1.ä½¿ç”¨ File ç±»ç»‘å®šä¸€ä¸ªæ–‡ä»¶</span>
        <span class="token class-name">File</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.æŠŠ File å¯¹è±¡ç»‘å®šåˆ°æµå¯¹è±¡ä¸Š</span>
        <span class="token class-name">Writer</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Writer out = new FileWriter(f, true); // è¿½åŠ å†…å®¹æ–¹å¼</span>

        <span class="token comment">// 3.è¿›è¡Œè¯»æˆ–å†™æ“ä½œ</span>
        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;Hello World!!!\r\n&quot;</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 4.å…³é—­æµ</span>
        <span class="token comment">// å­—ç¬¦æµæ“ä½œæ—¶ä½¿ç”¨äº†ç¼“å†²åŒºï¼Œå¹¶åœ¨å…³é—­å­—ç¬¦æµæ—¶ä¼šå¼ºåˆ¶å°†ç¼“å†²åŒºå†…å®¹è¾“å‡º</span>
        <span class="token comment">// å¦‚æœä¸å…³é—­æµï¼Œåˆ™ç¼“å†²åŒºçš„å†…å®¹æ˜¯æ— æ³•è¾“å‡ºçš„</span>
        <span class="token comment">// å¦‚æœæƒ³åœ¨ä¸å…³é—­æµæ—¶ï¼Œå°†ç¼“å†²åŒºå†…å®¹è¾“å‡ºï¼Œå¯ä»¥ä½¿ç”¨ flush å¼ºåˆ¶æ¸…ç©ºç¼“å†²åŒº</span>
        out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token class-name">String</span> filepath<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1.ä½¿ç”¨ File ç±»ç»‘å®šä¸€ä¸ªæ–‡ä»¶</span>
        <span class="token class-name">File</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.æŠŠ File å¯¹è±¡ç»‘å®šåˆ°æµå¯¹è±¡ä¸Š</span>
        <span class="token class-name">Reader</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 3.è¿›è¡Œè¯»æˆ–å†™æ“ä½œ</span>
        <span class="token keyword">int</span> temp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// æ¥æ”¶æ¯ä¸€ä¸ªå†…å®¹</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// è¯»å–å†…å®¹</span>
        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>temp <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// å¦‚æœä¸æ˜¯-1å°±è¡¨ç¤ºè¿˜æœ‰å†…å®¹ï¼Œå¯ä»¥ç»§ç»­è¯»å–</span>
            c<span class="token punctuation">[</span>len<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> temp<span class="token punctuation">;</span>
            len<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ–‡ä»¶å­—ç¬¦æ•°ä¸ºï¼š&quot;</span> <span class="token operator">+</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 4.å…³é—­æµ</span>
        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> c<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h4 id="å­—èŠ‚æµè½¬æ¢å­—ç¬¦æµ"><a href="#å­—èŠ‚æµè½¬æ¢å­—ç¬¦æµ" class="header-anchor">#</a> å­—èŠ‚æµè½¬æ¢å­—ç¬¦æµ</h4> <p>æˆ‘ä»¬å¯ä»¥åœ¨ç¨‹åºä¸­é€šè¿‡ <code>InputStream</code> å’Œ <code>Reader</code> ä»æ•°æ®æºä¸­è¯»å–æ•°æ®ï¼Œç„¶åä¹Ÿå¯ä»¥åœ¨ç¨‹åºä¸­å°†æ•°æ®é€šè¿‡ <code>OutputStream</code> å’Œ <code>Writer</code> è¾“å‡ºåˆ°ç›®æ ‡åª’ä»‹ä¸­</p> <p>ä½¿ç”¨ <code>InputStreamReader</code> å¯ä»¥å°†è¾“å…¥å­—èŠ‚æµè½¬åŒ–ä¸ºè¾“å…¥å­—ç¬¦æµï¼›ä½¿ç”¨<code>OutputStreamWriter</code>å¯ä»¥å°†è¾“å‡ºå­—èŠ‚æµè½¬åŒ–ä¸ºè¾“å‡ºå­—ç¬¦æµã€‚</p> <p><code>OutputStreamWriter</code> ç¤ºä¾‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OutputStreamWriterDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">File</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;temp.log&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Writer</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;hello world!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p><code>InputStreamReader</code> ç¤ºä¾‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InputStreamReaderDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">File</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;temp.log&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Reader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
        reader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="å­—èŠ‚æµ-vs-å­—ç¬¦æµ"><a href="#å­—èŠ‚æµ-vs-å­—ç¬¦æµ" class="header-anchor">#</a> å­—èŠ‚æµ vs. å­—ç¬¦æµ</h3> <p>ç›¸åŒç‚¹ï¼š</p> <p>å­—èŠ‚æµå’Œå­—ç¬¦æµéƒ½æœ‰ <code>read()</code>ã€<code>write()</code>ã€<code>flush()</code>ã€<code>close()</code> è¿™æ ·çš„æ–¹æ³•ï¼Œè¿™å†³å®šäº†å®ƒä»¬çš„æ“ä½œæ–¹å¼è¿‘ä¼¼ã€‚</p> <p>ä¸åŒç‚¹ï¼š</p> <ul><li><strong>æ•°æ®ç±»å‹</strong> <ul><li>å­—èŠ‚æµçš„æ•°æ®æ˜¯å­—èŠ‚ï¼ˆäºŒè¿›åˆ¶å¯¹è±¡ï¼‰ã€‚ä¸»è¦æ ¸å¿ƒç±»æ˜¯ <code>InputStream</code> ç±»å’Œ <code>OutputStream</code> ç±»ã€‚</li> <li>å­—ç¬¦æµçš„æ•°æ®æ˜¯å­—ç¬¦ï¼Œä¸€ä¸ªå­—ç¬¦ç­‰äºä¸¤ä¸ªå­—èŠ‚ã€‚ä¸»è¦æ ¸å¿ƒç±»æ˜¯ <code>Reader</code> ç±»å’Œ <code>Writer</code> ç±»ã€‚</li></ul></li> <li><strong>ç¼“å†²åŒº</strong> <ul><li>å­—èŠ‚æµåœ¨æ“ä½œæ—¶æœ¬èº«ä¸ä¼šç”¨åˆ°ç¼“å†²åŒºï¼ˆå†…å­˜ï¼‰ï¼Œæ˜¯æ–‡ä»¶ç›´æ¥æ“ä½œçš„ã€‚</li> <li>å­—ç¬¦æµåœ¨æ“ä½œæ—¶æ˜¯ä½¿ç”¨äº†ç¼“å†²åŒºï¼Œé€šè¿‡ç¼“å†²åŒºå†æ“ä½œæ–‡ä»¶ã€‚</li></ul></li></ul> <p>é€‰æ‹©ï¼š</p> <p>æ‰€æœ‰çš„æ–‡ä»¶åœ¨ç¡¬ç›˜æˆ–ä¼ è¾“æ—¶éƒ½æ˜¯ä»¥å­—èŠ‚æ–¹å¼ä¿å­˜çš„ï¼Œä¾‹å¦‚å›¾ç‰‡ï¼Œå½±éŸ³æ–‡ä»¶ç­‰éƒ½æ˜¯æŒ‰å­—èŠ‚æ–¹å¼å­˜å‚¨çš„ã€‚å­—ç¬¦æµæ— æ³•è¯»å†™è¿™äº›æ–‡ä»¶ã€‚</p> <p>æ‰€ä»¥ï¼Œé™¤äº†çº¯æ–‡æœ¬æ•°æ®æ–‡ä»¶ä½¿ç”¨å­—ç¬¦æµä»¥å¤–ï¼Œå…¶ä»–æ–‡ä»¶ç±»å‹éƒ½åº”è¯¥ä½¿ç”¨å­—èŠ‚æµæ–¹å¼ã€‚</p> <h2 id="ä¸‰ã€ä¼ ç»Ÿ-bio"><a href="#ä¸‰ã€ä¼ ç»Ÿ-bio" class="header-anchor">#</a> ä¸‰ã€ä¼ ç»Ÿ BIO</h2> <p>åœ¨ Linux ä¸­ï¼Œå½“åº”ç”¨è¿›ç¨‹è°ƒç”¨ <code>recvfrom</code> æ–¹æ³•è°ƒç”¨æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœå†…æ ¸æ²¡æœ‰æŠŠæ•°æ®å‡†å¤‡å¥½ä¸ä¼šç«‹åˆ»è¿”å›ï¼Œè€Œæ˜¯ä¼šç»å†ç­‰å¾…æ•°æ®å‡†å¤‡å°±ç»ªï¼Œæ•°æ®ä»å†…æ ¸å¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´ä¹‹åå†è¿”å›ï¼Œè¿™æœŸé—´åº”ç”¨è¿›ç¨‹ä¸€ç›´é˜»å¡ç›´åˆ°è¿”å›ï¼Œæ‰€ä»¥è¢«ç§°ä¸ºé˜»å¡ IO æ¨¡å‹ã€‚</p> <p><img src="http://dunwu.test.upcdn.net/snap/20200219153310.png" alt="img"></p> <p><strong>BIO ä¼šé˜»å¡è¿›ç¨‹ï¼Œä¸é€‚åˆé«˜å¹¶å‘åœºæ™¯</strong>ã€‚</p> <p>é‡‡ç”¨ BIO çš„æœåŠ¡ç«¯ï¼Œé€šå¸¸ç”±ä¸€ä¸ªç‹¬ç«‹çš„ Acceptor çº¿ç¨‹è´Ÿè´£ç›‘å¬å®¢æˆ·ç«¯çš„è¿æ¥ã€‚æˆ‘ä»¬ä¸€èˆ¬é€šè¿‡åœ¨<code>while(true)</code> å¾ªç¯ä¸­æœåŠ¡ç«¯ä¼šè°ƒç”¨ <code>accept()</code> æ–¹æ³•ç­‰å¾…æ¥æ”¶å®¢æˆ·ç«¯çš„è¿æ¥çš„æ–¹å¼ç›‘å¬è¯·æ±‚ï¼Œè¯·æ±‚ä¸€æ—¦æ¥æ”¶åˆ°ä¸€ä¸ªè¿æ¥è¯·æ±‚ï¼Œå°±å¯ä»¥å»ºç«‹é€šä¿¡å¥—æ¥å­—åœ¨è¿™ä¸ªé€šä¿¡å¥—æ¥å­—ä¸Šè¿›è¡Œè¯»å†™æ“ä½œï¼Œæ­¤æ—¶ä¸èƒ½å†æ¥æ”¶å…¶ä»–å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚ï¼Œåªèƒ½ç­‰å¾…åŒå½“å‰è¿æ¥çš„å®¢æˆ·ç«¯çš„æ“ä½œæ‰§è¡Œå®Œæˆï¼Œ ä¸è¿‡å¯ä»¥é€šè¿‡å¤šçº¿ç¨‹æ¥æ”¯æŒå¤šä¸ªå®¢æˆ·ç«¯çš„è¿æ¥ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚</p> <p>å¦‚æœè¦è®© <strong>BIO é€šä¿¡æ¨¡å‹</strong> èƒ½å¤ŸåŒæ—¶å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯è¯·æ±‚ï¼Œå°±å¿…é¡»ä½¿ç”¨å¤šçº¿ç¨‹ï¼ˆä¸»è¦åŸå› æ˜¯<code>socket.accept()</code>ã€<code>socket.read()</code>ã€<code>socket.write()</code> æ¶‰åŠçš„ä¸‰ä¸ªä¸»è¦å‡½æ•°éƒ½æ˜¯åŒæ­¥é˜»å¡çš„ï¼‰ï¼Œä½†ä¼šé€ æˆä¸å¿…è¦çš„çº¿ç¨‹å¼€é”€ã€‚ä¸è¿‡å¯ä»¥é€šè¿‡ <strong>çº¿ç¨‹æ± æœºåˆ¶</strong> æ”¹å–„ï¼Œçº¿ç¨‹æ± è¿˜å¯ä»¥è®©çº¿ç¨‹çš„åˆ›å»ºå’Œå›æ”¶æˆæœ¬ç›¸å¯¹è¾ƒä½ã€‚ä½¿ç”¨<code>FixedThreadPool</code> å¯ä»¥æœ‰æ•ˆçš„æ§åˆ¶äº†çº¿ç¨‹çš„æœ€å¤§æ•°é‡ï¼Œä¿è¯äº†ç³»ç»Ÿæœ‰é™çš„èµ„æºçš„æ§åˆ¶ï¼Œå®ç°äº† N(å®¢æˆ·ç«¯è¯·æ±‚æ•°é‡):M(å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚çš„çº¿ç¨‹æ•°é‡)çš„ä¼ªå¼‚æ­¥ I/O æ¨¡å‹ï¼ˆN å¯ä»¥è¿œè¿œå¤§äº Mï¼‰ï¼Œä¸‹é¢ä¸€èŠ‚&quot;ä¼ªå¼‚æ­¥ BIO&quot;ä¸­ä¼šè¯¦ç»†ä»‹ç»åˆ°ã€‚</p> <p><strong>å³ä½¿å¯ä»¥ç”¨çº¿ç¨‹æ± ç•¥å¾®ä¼˜åŒ–ï¼Œä½†æ˜¯ä¼šæ¶ˆè€—å®è´µçš„çº¿ç¨‹èµ„æºï¼Œå¹¶ä¸”åœ¨ç™¾ä¸‡çº§å¹¶å‘åœºæ™¯ä¸‹ä¹Ÿæ’‘ä¸ä½</strong>ã€‚å¦‚æœå¹¶å‘è®¿é—®é‡å¢åŠ ä¼šå¯¼è‡´çº¿ç¨‹æ•°æ€¥å‰§è†¨èƒ€å¯èƒ½ä¼šå¯¼è‡´çº¿ç¨‹å †æ ˆæº¢å‡ºã€åˆ›å»ºæ–°çº¿ç¨‹å¤±è´¥ç­‰é—®é¢˜ï¼Œæœ€ç»ˆå¯¼è‡´è¿›ç¨‹å®•æœºæˆ–è€…åƒµæ­»ï¼Œä¸èƒ½å¯¹å¤–æä¾›æœåŠ¡ã€‚</p> <h2 id="å››ã€ä¼ªå¼‚æ­¥-bio"><a href="#å››ã€ä¼ªå¼‚æ­¥-bio" class="header-anchor">#</a> å››ã€ä¼ªå¼‚æ­¥ BIO</h2> <p>ä¸ºäº†è§£å†³åŒæ­¥é˜»å¡ I/O é¢ä¸´çš„ä¸€ä¸ªé“¾è·¯éœ€è¦ä¸€ä¸ªçº¿ç¨‹å¤„ç†çš„é—®é¢˜ï¼Œåæ¥æœ‰äººå¯¹å®ƒçš„çº¿ç¨‹æ¨¡å‹è¿›è¡Œäº†ä¼˜åŒ–ä¸€ä¸€ä¸€åç«¯é€šè¿‡ä¸€ä¸ªçº¿ç¨‹æ± æ¥å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚æ¥å…¥ï¼Œå½¢æˆå®¢æˆ·ç«¯ä¸ªæ•° Mï¼šçº¿ç¨‹æ± æœ€å¤§çº¿ç¨‹æ•° N çš„æ¯”ä¾‹å…³ç³»ï¼Œå…¶ä¸­ M å¯ä»¥è¿œè¿œå¤§äº Nã€‚é€šè¿‡çº¿ç¨‹æ± å¯ä»¥çµæ´»åœ°è°ƒé…çº¿ç¨‹èµ„æºï¼Œè®¾ç½®çº¿ç¨‹çš„æœ€å¤§å€¼ï¼Œé˜²æ­¢ç”±äºæµ·é‡å¹¶å‘æ¥å…¥å¯¼è‡´çº¿ç¨‹è€—å°½ã€‚</p> <p><img src="http://dunwu.test.upcdn.net/snap/20200219153340.png" alt="img"></p> <p>é‡‡ç”¨çº¿ç¨‹æ± å’Œä»»åŠ¡é˜Ÿåˆ—å¯ä»¥å®ç°ä¸€ç§å«åšä¼ªå¼‚æ­¥çš„ I/O é€šä¿¡æ¡†æ¶ï¼Œå®ƒçš„æ¨¡å‹å›¾å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚å½“æœ‰æ–°çš„å®¢æˆ·ç«¯æ¥å…¥æ—¶ï¼Œå°†å®¢æˆ·ç«¯çš„ Socket å°è£…æˆä¸€ä¸ª Taskï¼ˆè¯¥ä»»åŠ¡å®ç° java.lang.Runnable æ¥å£ï¼‰æŠ•é€’åˆ°åç«¯çš„çº¿ç¨‹æ± ä¸­è¿›è¡Œå¤„ç†ï¼ŒJDK çš„çº¿ç¨‹æ± ç»´æŠ¤ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—å’Œ N ä¸ªæ´»è·ƒçº¿ç¨‹ï¼Œå¯¹æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡è¿›è¡Œå¤„ç†ã€‚ç”±äºçº¿ç¨‹æ± å¯ä»¥è®¾ç½®æ¶ˆæ¯é˜Ÿåˆ—çš„å¤§å°å’Œæœ€å¤§çº¿ç¨‹æ•°ï¼Œå› æ­¤ï¼Œå®ƒçš„èµ„æºå ç”¨æ˜¯å¯æ§çš„ï¼Œæ— è®ºå¤šå°‘ä¸ªå®¢æˆ·ç«¯å¹¶å‘è®¿é—®ï¼Œéƒ½ä¸ä¼šå¯¼è‡´èµ„æºçš„è€—å°½å’Œå®•æœºã€‚</p> <p>ä¼ªå¼‚æ­¥ I/O é€šä¿¡æ¡†æ¶é‡‡ç”¨äº†çº¿ç¨‹æ± å®ç°ï¼Œå› æ­¤é¿å…äº†ä¸ºæ¯ä¸ªè¯·æ±‚éƒ½åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çº¿ç¨‹é€ æˆçš„çº¿ç¨‹èµ„æºè€—å°½é—®é¢˜ã€‚ä¸è¿‡å› ä¸ºå®ƒçš„åº•å±‚ä»ç„¶æ˜¯åŒæ­¥é˜»å¡çš„ BIO æ¨¡å‹ï¼Œå› æ­¤æ— æ³•ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ã€‚</p> <h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="header-anchor">#</a> å‚è€ƒèµ„æ–™</h2> <ul><li><a href="https://item.jd.com/10058164.html" target="_blank" rel="noopener noreferrer">ã€ŠJava ç¼–ç¨‹æ€æƒ³ï¼ˆThinking in javaï¼‰ã€‹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://item.jd.com/12759308.html" target="_blank" rel="noopener noreferrer">ã€ŠJava æ ¸å¿ƒæŠ€æœ¯ å· I åŸºç¡€çŸ¥è¯†ã€‹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://item.jd.com/12555860.html" target="_blank" rel="noopener noreferrer">ã€ŠJava ä»å…¥é—¨åˆ°ç²¾é€šã€‹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://time.geekbang.org/column/intro/100006701" target="_blank" rel="noopener noreferrer">ã€ŠJava æ ¸å¿ƒæŠ€æœ¯é¢è¯•ç²¾è®²ã€‹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/Snailclimb/JavaGuide/blob/master/docs/java/BIO-NIO-AIO.md" target="_blank" rel="noopener noreferrer">BIO,NIO,AIO æ€»ç»“<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/javacore/edit/master/docs/io/java-bio.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤é¡µé¢ï¼</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/javacore/assets/js/app.6b9bd1ac.js" defer></script><script src="/javacore/assets/js/4.5b70554b.js" defer></script><script src="/javacore/assets/js/49.6933cdf6.js" defer></script><script src="/javacore/assets/js/5.97e60065.js" defer></script>
  </body>
</html>
